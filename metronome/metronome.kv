#:kivy 2.0.0
#:import hex kivy.utils.get_color_from_hex
#:import MDIconButton kivymd.uix.button 
#:import MDFillRoundFlatButton kivymd.uix.button 
#:import MDTextField kivymd.uix.textfield

<MainLayout>:
    song_name: song_name

    BoxLayout:
        orientation: "horizontal"
        spacing: 25
        size_hint: 0.7, 0.2
        pos_hint: {"center_x" : 0.5, "top": 1}
        MDTextField:
            id: song_name
            hint_text: "Song name - artist name"
            mode: "rectangle"
        MDFillRoundFlatButton:
            text: "Send"
            size_hint: 0.7, 0.3
            font_size: "18sp"
            on_press: root.search()
    
    PlayButton:
        bpm: root.bpm
        user_font_size: "125sp"
        pos_hint: {"center_x" : 0.5, "center_y": 0.5}
    
    MDBoxLayout:
        orientation: "horizontal"
        size_hint: 0.3, 0.15
        pos_hint: {"center_x" : 0.5, "center_y": 0.3}
        padding: 0, 0, 0, 0
        TextInput:
            text: str(root.bpm)
            input_filter: "int"
            multiline: False
            background_color: (0,0,0,0)
            size_hint: 1, 0.5
            font_size: 30
            pos_hint: {"center_y" : 0.5}

        MDLabel:
            text: "BPM"
            font_size: 30
            pos_hint: {"center_y" : 0.5}
    MDBoxLayout:
        orientation: "horizontal"
        size_hint: 0.8, 0.1
        pos_hint: {"center_x" : 0.5, "center_y": 0.2}
        spacing: 10
        MDTextButton:
            text: "-"
            font_size: 60
            pos_hint: {"center_y" : 0.5}
            color: app.theme_cls.primary_color
            on_press: root.bpm -= 1 if root.bpm != root.min_bpm else 0
        MDSlider:
            size_hint_x: 0.8
            min: root.min_bpm
            max: root.max_bpm
            value: root.bpm
            step: 1
            hint: False
            pos_hint: {"center_y" : 0.5}
            on_value: root.bpm = self.value
        MDTextButton:
            text: "+"
            font_size: 60
            pos_hint: {"center_y" : 0.5}
            color: app.theme_cls.primary_color
            on_press: root.bpm += 1 if root.bpm != root.max_bpm else 0
        