#:kivy 2.0.0


<MainLayout>:
    song_input: song_input
    artist_input: artist_input
    search_info: search_info

    # Search song
    BoxLayout:
        orientation: "horizontal"
        spacing: 25
        size_hint: 0.9, 0.2
        pos_hint: {"center_x": 0.52, "top": 1}
        
        BoxLayout:
            spacing: 35
            
            MDTextField:
                id: song_input
                hint_text: "Song"
                mode: "rectangle"
                on_text_validate: root.on_search()
                write_tab: False
                focus: True
            MDTextField:
                id: artist_input
                hint_text: "Artist"
                mode: "rectangle"
                on_text_validate: root.on_search()
        
        MDFillRoundFlatButton:
            text: "Search"
            size_hint_x: 0.4
            font_size: "18sp"
            on_press: root.on_search()
    
    # Search info
    MDLabel:
        size_hint: 0.8, 0.2
        pos_hint: {"center_x": 0.5, "center_y": 0.75}
        id: search_info
        font_size: 15
        text: "Try searching for a song"
        theme_text_color: "Hint"

    PlayButton:
        bpm: root.bpm
        user_font_size: "125sp"
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
    
    # Display bpm
    MDBoxLayout:
        orientation: "horizontal"
        size_hint: 0.3, 0.15
        pos_hint: {"center_x": 0.5, "center_y": 0.3}
        
        TextInput:
            text: str(root.bpm)
            input_filter: "int"
            multiline: False
            background_color: (0, 0, 0, 0)
            size_hint: 1, 0.5
            font_size: 30
            pos_hint: {"center_y": 0.5}
        MDLabel:
            text: "BPM"
            font_size: 30
            pos_hint: {"center_y": 0.5}
    
    MDBoxLayout:
        orientation: "horizontal"
        size_hint: 0.8, 0.1
        pos_hint: {"center_x": 0.5, "center_y": 0.2}
        spacing: 10
        
        # Increase bpm by 1
        MDTextButton:
            text: "-"
            font_size: 60
            pos_hint: {"center_y": 0.5}
            color: app.theme_cls.primary_color
            on_press: root.bpm -= 1 if root.bpm != root.min_bpm else 0
        MDSlider:
            size_hint_x: 0.8
            min: root.min_bpm
            max: root.max_bpm
            value: root.bpm
            step: 1
            hint: False
            pos_hint: {"center_y": 0.5}
            on_value: root.bpm = self.value
        
        # Decrease bpm by 1
        MDTextButton:
            text: "+"
            font_size: 60
            pos_hint: {"center_y": 0.5}
            color: app.theme_cls.primary_color
            on_press: root.bpm += 1 if root.bpm != root.max_bpm else 0
